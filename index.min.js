var b=document.getElementById("a").getContext("2d"),c=[],d={x:10,y:10},e=1,f=Date.now();function g(){return{x:Math.floor(20*Math.random()),y:Math.floor(20*Math.random())}}var h=g(),k={x:1,y:0};function l(){for(var a=4;a<c.length;a++)if(c[a].x===c[0].x&&c[a].y===c[0].y)return!0;return!1}
function q(){b.clearRect(0,0,400,400);b.fillStyle="black";b.fillRect(0,0,400,400);b.fillStyle="limegreen";c.forEach(function(a){b.fillRect(20*a.x,20*a.y,20,20)});b.fillStyle="rgb(255, 0, 0)";b.fillRect(20*h.x,20*h.y,20,20)}
function r(){d={x:d.x+k.x,y:d.y+k.y};["x","y"].forEach(function(a){for(;0>d[a];)d[a]+=20;for(;20<=d[a];)d[a]-=20});c.push(d);if(l())throw alert("You lost!"),Error("Game over.");for(;c.length>e;)c.shift();d.x===h.x&&d.y===h.y&&(e++,document.getElementById("b").innerHTML=e,h=g(),c.forEach(function(a){h.x==a.x&&h.y==a.y&&(h=g())}))}
document.addEventListener("keydown",function(a){a=a.code;"KeyA"!=a&&"ArrowLeft"!=a||0!==k.x||(k={x:-1,y:0});"KeyS"!=a&&"ArrowDown"!=a||0!==k.y||(k={x:0,y:1});"KeyD"!=a&&"ArrowRight"!=a||0!==k.x||(k={x:1,y:0});"KeyW"!=a&&"ArrowUp"!=a||0!==k.y||(k={x:0,y:-1})});function t(a){var m=1E3/6,n=Date.now(),p=n-f;a.requestAnimationFrame(function(){p>m&&(r(),q(),f=n-p%m);t(a)})}t(window);
